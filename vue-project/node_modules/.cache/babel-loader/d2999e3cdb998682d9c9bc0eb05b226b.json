{"ast":null,"code":"import { vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex flex-column align-items-stretch flex-shrink-0 bg-white\"\n};\nconst _hoisted_3 = {\n  class: \"d-flex align-items-center flex-shrink-0 p-3 link-dark text-decoration-none border-bottom\"\n};\nconst _hoisted_4 = {\n  class: \"list-group list-group-flush border-bottom scrollarea\"\n};\nconst _hoisted_5 = {\n  class: \"d-flex w-100 align-items-center justify-content-between\"\n};\nconst _hoisted_6 = {\n  class: \"mb-1\"\n};\nconst _hoisted_7 = {\n  class: \"col-10 mb-1 small\"\n};\nconst _hoisted_8 = {\n  class: \"col-10 mb-1 small\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n    class: \"fs-5 fw-semibold\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.username = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.username]])]), _createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.messages, message => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"list-group-item list-group-item-action py-3 lh-tight\",\n      key: message\n    }, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"strong\", _hoisted_6, _toDisplayString(message.username), 1\n    /* TEXT */\n    )]), _createElementVNode(\"div\", _hoisted_7, _toDisplayString(message.amount), 1\n    /* TEXT */\n    ), _createElementVNode(\"div\", _hoisted_8, _toDisplayString(message.date), 1\n    /* TEXT */\n    )]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])]), _createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $setup.submit && $setup.submit(...args), [\"prevent\"]))\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    class: \"form-control\",\n    placeholder: \"Write a message\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.amount = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.amount]]), _withDirectives(_createElementVNode(\"input\", {\n    class: \"form-control\",\n    placeholder: \"Write a message\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.date = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.date]])], 32\n  /* HYDRATE_EVENTS */\n  )]);\n}","map":{"version":3,"mappings":";;EACOA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;EAGNA,KAAK,EAAC;;;EAEFA,KAAK,EAAC;;;EACDA,KAAK,EAAC;;;EAEXA,KAAK,EAAC;;;EACNA,KAAK,EAAC;;;uBAXnBC,oBAoBM,KApBN,cAoBM,CAnBJC,oBAcM,KAdN,cAcM,CAbJA,oBAEM,KAFN,cAEM,iBADJA,oBAAqD,OAArD,EAAqD;IAA9CF,KAAK,EAAC,kBAAwC;+DAAZG,kBAAQC;EAAI,CAArD;;EAAA,kBAAyCD,kBACrC,CAFN,CAaI,EAVJD,oBASM,KATN,cASM,oBARJD,oBAMMI,SANN,EAMM,IANN,EAMMC,YAN8EH,eAM9E,EANmEI,OAAmB,IAAZ;yBAAhFN,oBAMM,KANN,EAMM;MANDD,KAAK,EAAC,sDAML;MANyFQ,GAAG,EAAED;IAM9F,CANN,GACEL,oBAEM,KAFN,cAEM,CADJA,oBAAoD,QAApD,cAAoDO,iBAA5BF,OAAO,CAACG,QAAoB,CAApD,EAAwC;IAAA;IAAxC,CACI,CAFN,GAGAR,oBAAyD,KAAzD,cAAyDO,iBAAvBF,OAAO,CAACI,MAAe,CAAzD,EAAgD;IAAA;IAAhD,GACAT,oBAAuD,KAAvD,cAAuDO,iBAArBF,OAAO,CAACK,IAAa,CAAvD,EAA8C;IAAA;IAA9C,EALF;GAMM,CANN;;EAAA,CAQI,EATN,CAUI,CAdN,CAmBI,EAJJV,oBAGO,MAHP,EAGO;IAHAW,QAAM,wDAAUV,uCAAV,EAAgB,WAAhB;EAGN,CAHP,mBACED,oBAA6E,OAA7E,EAA6E;IAAtEF,KAAK,EAAC,cAAgE;IAAjDc,WAAW,EAAC,iBAAqC;+DAAVX,gBAAMC;EAAI,CAA7E;;EAAA,kBAAmED,kCACnED,oBAA2E,OAA3E,EAA2E;IAApEF,KAAK,EAAC,cAA8D;IAA/Cc,WAAW,EAAC,iBAAmC;+DAARX,cAAIC;EAAI,CAA3E;;EAAA,kBAAmED,eAFrE;;EAAA,CAII,CApBN","names":["class","_createElementBlock","_createElementVNode","$setup","$event","_Fragment","_renderList","message","key","_toDisplayString","username","amount","date","onSubmit","placeholder"],"sourceRoot":"","sources":["D:\\VS code Files\\real time vue pusher\\vue-project\\src\\App.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"d-flex flex-column align-items-stretch flex-shrink-0 bg-white\">\n      <div class=\"d-flex align-items-center flex-shrink-0 p-3 link-dark text-decoration-none border-bottom\">\n        <input class=\"fs-5 fw-semibold\" v-model=\"username\" />\n      </div>\n      <div class=\"list-group list-group-flush border-bottom scrollarea\">\n        <div class=\"list-group-item list-group-item-action py-3 lh-tight\" v-for=\"message in messages\" :key=\"message\">\n          <div class=\"d-flex w-100 align-items-center justify-content-between\">\n            <strong class=\"mb-1\">{{ message.username }}</strong>\n          </div>\n          <div class=\"col-10 mb-1 small\">{{ message.amount }}</div>\n          <div class=\"col-10 mb-1 small\">{{ message.date }}</div>\n        </div>\n\n      </div>\n    </div>\n    <form @submit.prevent=\"submit\">\n      <input class=\"form-control\" placeholder=\"Write a message\" v-model=\"amount\" />\n      <input class=\"form-control\" placeholder=\"Write a message\" v-model=\"date\" />\n    </form>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue';\nimport Pusher from 'pusher-js';\nexport default {\n  name: 'App',\n  setup() {\n    const username = ref('username');\n    const messages = ref([]);\n    const amount = ref('');\n    const date = ref('');\n    const authUrl = 'http://localhost:8000/pusher/user-auth'\n    onMounted(() => {\n      Pusher.logToConsole = true;\n      const pusher = new Pusher('503c295a8c71896beade', {\n        cluster: 'mt1',        \n        userAuthentication: {\n          endpoint: authUrl\n        },\n        channelAuthorization: {\n          endpoint: authUrl\n        }\n        // authorizer: (socketId, callback) => {\n        //   fetch(authUrl, {\n        //     method: \"POST\",\n        //     headers: new Headers({ \"Content-Type\": \"application/json\" }),\n        //     body: JSON.stringify({\n        //       socket_id: socketId,\n        //       channel_name: channel.name\n        //     })\n        //   })\n        //     .then(res => {\n        //       if (!res.ok) {\n        //         throw new Error(`Received ${res.statusCode} from ${authUrl}`);\n        //       }\n        //       return res.json();\n        //     })\n        //     .then(data => {\n        //       callback(null, data);\n        //     })\n        //     .catch(err => {\n        //       callback(new Error(`Error calling auth endpoint: ${err}`), {\n        //         auth: \"\"\n        //       });\n        //     });\n        // }\n      });\n      \n      const channel = pusher.subscribe('private-my_channel');\n      channel.bind('my_event', data => {\n        messages.value.push(data);\n      });\n    })\n    const submit = async () => {\n      await fetch('http://localhost:8000/api/messages', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          username: username.value,\n          amount: amount.value,\n          date: date.value,\n        })\n      })\n      amount.value = '';\n      date.value = '';\n    }\n    return {\n      username,\n      amount,\n      date,\n      messages,\n      submit\n    }\n  }\n}\n</script>\n\n<style>\n.scrollarea {\n  min-height: 500px;\n}\n</style>"]},"metadata":{},"sourceType":"module"}