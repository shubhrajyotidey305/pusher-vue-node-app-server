{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport Pusher from 'pusher-js';\nexport default {\n  name: 'App',\n\n  setup() {\n    const username = ref('username');\n    const messages = ref([]);\n    const amount = ref('');\n    const authUrl = 'http://localhost:8000/pusher/user-auth';\n    onMounted(() => {\n      Pusher.logToConsole = true;\n      const pusher = new Pusher('503c295a8c71896beade', {\n        cluster: 'mt1',\n        authEndpoint: authUrl\n      });\n      const channel = pusher.subscribe('private-my_channel');\n      channel.bind('my_event', data => {\n        console.log(data.message);\n        messages.value.push(data);\n      });\n    });\n\n    const submit = async () => {\n      await fetch('http://localhost:8000/api/messages', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: username.value,\n          amount: amount.value\n        })\n      });\n      amount.value = '';\n      var n = new Date();\n      var y = n.getFullYear();\n      var m = n.getMonth() + 1;\n      var d = n.getDate();\n      document.getElementById(\"date\").innerHTML = \"Date of Transaction :\" + m + \"/\" + d + \"/\" + y;\n    };\n\n    return {\n      username,\n      messages,\n      amount,\n      submit\n    };\n  }\n\n};","map":{"version":3,"mappings":"AA2BA,SAASA,GAAT,EAAcC,SAAd,QAA+B,KAA/B;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,eAAe;EACbC,IAAI,EAAE,KADO;;EAEbC,KAAK,GAAG;IACN,MAAMC,QAAO,GAAIL,GAAG,CAAC,UAAD,CAApB;IACA,MAAMM,QAAO,GAAIN,GAAG,CAAC,EAAD,CAApB;IACA,MAAMO,MAAK,GAAIP,GAAG,CAAC,EAAD,CAAlB;IACA,MAAMQ,OAAM,GAAI,wCAAhB;IACAP,SAAS,CAAC,MAAM;MACdC,MAAM,CAACO,YAAP,GAAsB,IAAtB;MACA,MAAMC,MAAK,GAAI,IAAIR,MAAJ,CAAW,sBAAX,EAAmC;QAChDS,OAAO,EAAE,KADuC;QAEhDC,YAAY,EAAEJ;MAFkC,CAAnC,CAAf;MAIA,MAAMK,OAAM,GAAIH,MAAM,CAACI,SAAP,CAAiB,oBAAjB,CAAhB;MACAD,OAAO,CAACE,IAAR,CAAa,UAAb,EAAyBC,IAAG,IAAK;QAC/BC,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,OAAjB;QACAb,QAAQ,CAACc,KAAT,CAAeC,IAAf,CAAoBL,IAApB;MACD,CAHD;IAKD,CAZQ,CAAT;;IAaA,MAAMM,MAAK,GAAI,YAAY;MACzB,MAAMC,KAAK,CAAC,oCAAD,EAAuC;QAChDC,MAAM,EAAE,MADwC;QAEhDC,OAAO,EAAE;UAAE,gBAAgB;QAAlB,CAFuC;QAGhDC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;UACnBvB,QAAQ,EAAEA,QAAQ,CAACe,KADA;UAEnBb,MAAM,EAAEA,MAAM,CAACa;QAFI,CAAf;MAH0C,CAAvC,CAAX;MASAb,MAAM,CAACa,KAAP,GAAe,EAAf;MACA,IAAIS,IAAI,IAAIC,IAAJ,EAAR;MACA,IAAIC,IAAIF,CAAC,CAACG,WAAF,EAAR;MACA,IAAIC,IAAIJ,CAAC,CAACK,QAAF,KAAe,CAAvB;MACA,IAAIC,IAAIN,CAAC,CAACO,OAAF,EAAR;MACAC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCC,SAAhC,GAA4C,0BAA0BN,CAA1B,GAA8B,GAA9B,GAAoCE,CAApC,GAAwC,GAAxC,GAA8CJ,CAA1F;IACF,CAhBA;;IAiBA,OAAO;MACL1B,QADK;MAELC,QAFK;MAGLC,MAHK;MAILe;IAJK,CAAP;EAMF;;AA3Ca,CAAf","names":["ref","onMounted","Pusher","name","setup","username","messages","amount","authUrl","logToConsole","pusher","cluster","authEndpoint","channel","subscribe","bind","data","console","log","message","value","push","submit","fetch","method","headers","body","JSON","stringify","n","Date","y","getFullYear","m","getMonth","d","getDate","document","getElementById","innerHTML"],"sourceRoot":"","sources":["D:\\VS code Files\\real time vue pusher\\vue-project\\src\\App.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"d-flex flex-column align-items-stretch flex-shrink-0 bg-white\">\n      <div class=\"d-flex align-items-center flex-shrink-0 p-3 link-dark text-decoration-none border-bottom\">\n        <input class=\"fs-5 fw-semibold\" v-model=\"username\" />\n        <form @submit.prevent=\"submit\">\n          <input class=\"form-control\" placeholder=\"Enter Amount\" v-model=\"amount\" />\n\n        </form>\n      </div>\n      <h5>Transaction History</h5>\n      <br>\n      <div class=\"list-group list-group-flush border-bottom scrollarea\">\n        <div class=\"list-group-item list-group-item-action py-3 lh-tight\" v-for=\"message in messages\" :key=\"message\">\n          <div class=\"d-flex w-100 align-items-center justify-content-between\">\n            <strong class=\"mb-1\">Sender's Name: {{ message.username }}</strong>\n          </div>\n          <div class=\"col-10 mb-1 small\">Amount of Transaction: Rs {{ message.amount }}</div>\n          <p id=\"date\"></p>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue';\nimport Pusher from 'pusher-js';\nexport default {\n  name: 'App',\n  setup() {\n    const username = ref('username');\n    const messages = ref([]);\n    const amount = ref('');\n    const authUrl = 'http://localhost:8000/pusher/user-auth'\n    onMounted(() => {\n      Pusher.logToConsole = true;\n      const pusher = new Pusher('503c295a8c71896beade', {\n        cluster: 'mt1',\n        authEndpoint: authUrl,\n      });\n      const channel = pusher.subscribe('private-my_channel');\n      channel.bind('my_event', data => {\n        console.log(data.message);\n        messages.value.push(data);\n      });\n      \n    })\n    const submit = async () => {\n      await fetch('http://localhost:8000/api/messages', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          username: username.value,\n          amount: amount.value\n        })\n      })\n      \n      amount.value = '';\n      var n = new Date();\n      var y = n.getFullYear();\n      var m = n.getMonth() + 1;\n      var d = n.getDate();\n      document.getElementById(\"date\").innerHTML = \"Date of Transaction :\" + m + \"/\" + d + \"/\" + y;\n    }\n    return {\n      username,\n      messages,\n      amount,\n      submit\n    }\n  }\n}\n</script>\n\n<style>\n.scrollarea {\n  min-height: 500px;\n}\n\nh5 {\n  font-size: large;\n}\n</style>"]},"metadata":{},"sourceType":"module"}